@host = http://localhost:3000
@apiPrefix = api
@baseUrl = {{host}}/{{apiPrefix}}
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ODkzNTIwZC01YWY0LTRhZDgtYmRjMS05MmE2M2YzZjgzMmIiLCJyb2xlIjoidXNlciIsImlhdCI6MTc2Nzg5ODI3NywiZXhwIjoxNzY3OTg0Njc3fQ.VdQQH5cHugW8m5qd2KU-mHxdGUf_amxSfURBNfqcztY
@uploadUrl = https://storage.googleapis.com/job-seeking-bucket/documents/5893520d-5af4-4ad8-bdc1-92a63f3f832b/c4154a15-d898-4733-97f4-29266eccdf69/sample.pdf?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=job-seeking-service-account%40job-seeking-service.iam.gserviceaccount.com%2F20260108%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20260108T190411Z&X-Goog-Expires=900&X-Goog-SignedHeaders=content-type%3Bhost&X-Goog-Signature=38e84198ba76c8b5486a26697cfd5412d328e2c0cdd54497ab2cbaaa060e3ff2fa16887cff461eb7e711859109e280de44f2ac4dfcd701c50f31a319e528e0ed2cc4b3f02f15c572c9fdfd45e73c2c32db9c76f5ffdfe4c88ad3fdcd63e16dff30af1a195db11060285d6aafa992030ed00e8e1a967abe851ec214d920f333a805618fe284750dcc3ddae52a781027c1f3c420c1a2be472eb43c7befbb72e7631e4d7406c115412f0c0948d6789aa5f3d6703554941170d863630f1292d2297d24a5d6e16618e5877f6e3ef3824341bbc7bcfcdd9e744f09d7903ef1d723fdefc6a9a6b6b9306837ea11c327c35f7ae0d8ede45edb64e93502f27f8ece388d70
### Health check (public)
GET http://localhost:3000/health

### Health test (public)
GET http://localhost:3000/health/test

### Send register code (public)
POST {{baseUrl}}/auth/send-register-code
Content-Type: application/json

{
  "email": "copaca7463@gopicta.com"
}

### Register (public)
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "copaca7463@gopicta.com",
  "password": "Password123!",
  "confirmPassword": "Password123!",
  "code": "987149"
}

### Login (public)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "copaca7463@gopicta.com",
  "password": "Password123!?"
}

### Logout (auth)
POST {{baseUrl}}/auth/logout
Authorization: Bearer {{accessToken}}

### Change password (auth)
POST {{baseUrl}}/auth/change-password
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "oldPassword": "Password123!",
  "password": "Password123!?",
  "confirmPassword": "Password123!?"
}

### Reset password (public)
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "email": "user@example.com",
  "code": "123456",
  "newPassword": "Password123!",
  "confirmPassword": "Password123!"
}

### Send reset password code (public)
POST {{baseUrl}}/auth/send-reset-password-code
Content-Type: application/json

{
  "email": "user@example.com"
}

### Get current user (auth)
GET {{baseUrl}}/user
Authorization: Bearer {{accessToken}}

### Create profile input (auth)
POST {{baseUrl}}/profile-inputs
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "targetRoles": "JavaScript developer, TypeScript developer, Next.js developer",
  "notes": "Looking for mid-level roles, remote preferred."
}

### Get latest profile input (auth)
GET {{baseUrl}}/profile-inputs/latest
Authorization: Bearer {{accessToken}}

### Create document upload URL (auth)
POST {{baseUrl}}/documents/upload-url
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "type": "CV",
  "originalName": "sample.pdf",
  "mimeType": "application/pdf",
  "size": 123456
}

### Upload PDF to signed URL (public)
PUT {{uploadUrl}}
Content-Type: application/pdf

< ./apps/api/test-files/sample.pdf

### Confirm document upload (auth)
POST {{baseUrl}}/documents/confirm
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "documentId": "c4154a15-d898-4733-97f4-29266eccdf69"
}

### List documents (auth)
GET {{baseUrl}}/documents
Authorization: Bearer {{accessToken}}

### List documents by type (auth)
GET {{baseUrl}}/documents?type=CV
Authorization: Bearer {{accessToken}}

### Extract document text (auth)
POST {{baseUrl}}/documents/extract
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "documentId": "replace_with_document_id"
}

### Sync documents with storage (auth)
POST {{baseUrl}}/documents/sync
Authorization: Bearer {{accessToken}}

### Create career profile (auth)
POST {{baseUrl}}/career-profiles
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "instructions": "Focus on backend roles and highlight NestJS experience."
}

### Get latest career profile (auth)
GET {{baseUrl}}/career-profiles/latest
Authorization: Bearer {{accessToken}}

### Score job fit (auth)
POST {{baseUrl}}/job-matching/score
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "jobDescription": "We are looking for a backend developer with NestJS, PostgreSQL, and REST API experience."
}
